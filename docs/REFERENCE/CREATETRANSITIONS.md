# Create transitions and define conditions

Using the states, you can create transitions between states. Your transition will be configured with defaults based on your AAC configuration, defined within the DefaultsProvider.

To create a transition from Any, Exit, or Entry, there are some functions in the states like `.TransitionsFromAny()` or `.Exits()`.

Start defining conditions for that transition using the `.When(...)` operator.

Parameters have functions that generate conditions once invoked.

```csharp
reevaluating.TransitionsTo(state)
    // Use ".Av3" to access VRChat standard parameters.
    // Accessing these parameters will create the corresponding parameter in the animator.
    .When(layer.Av3().GestureLeft.IsEqualTo(left))
    .And(layer.Av3().GestureRight.IsEqualTo(right));
state.TransitionsTo(reevaluating)
    .When(layer.Av3().GestureLeft.IsNotEqualTo(left))
    .Or()
    .When(layer.Av3().GestureRight.IsNotEqualTo(right));
```

## When(), And(), and Or() operators

In animator transitions, all conditions must be verified for the transition to occur; this is effectively a ‚ÄúAND‚Äù of all of the conditions (A && B && C).

This is done by using the `.And(...)` operator: `.When(A).And(B).And(C)`

To represent ‚ÄúOR‚Äù, new transitions need to be created; ((A && B && C) || (D && E)) results in:

- Transition 1: (A && B && C)
- Transition 2: (D && E)

This is done by using the `.Or(...)` operator: `.When(A).And(B).And(C).Or().When(D).And(E)`

From this limitation, conditions with nested OR cannot be expressed easily, such as:

- üö´ (F && (G || H) && (J || K))

## Conditions that generate multiple transitions

Some conditions generate multiple transitions, such as `boolParameters.IsAnyFalse()`

In order to still let you express these expressions easily, the following applies:

- These conditions can only be used in a `.When(...)` operator, and not within a `.And(...)`
- If such a condition is used, calling `.And(...)` will apply the condition to all transitions generated by the `.When(...)` operator up until the next `Or(...)` operator if any exists.
    - For example:
      `.When(fx.BoolParameters(I, J).IsAnyFalse()).And(K.IsTrue())`
    - Is equivalent to:
      `.When(I.IsFalse()).And(K.IsTrue()).Or().When(J.IsFalse()).And(K.IsTrue())`

## Use the WhenConditions() operator to build in a `for` loop

The presence of the `.When(...)` operator can make it difficult to build conditions iteratively in a `for` loop.

For this purpose, use the `.WhenConditions()` operator. This will let you build conditions using the `.And(...)` operator.

```csharp
var conditions = state.TransitionsFromEntry().WhenConditions();
for (var i = 0; i < numberOfBits; i++)
{
   conditions.And(parameter[i].IsEqualTo(bitMask[i]));
}
```

## Create many-to-one transitions using a `foreach` loop

There is no facility to create multiple identical transitions from multiple states to another state.

Use a regular `foreach` loop to achieve this.

```csharp
foreach (var cancelWhenNotAllowed in new[] {auto, reverse, manual, custom, done})
{
    cancelWhenNotAllowed.TransitionsTo(idle).When(allowSystemParameter.IsFalse());
}
```
